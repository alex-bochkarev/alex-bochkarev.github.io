<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>BDD_test &mdash; Align-BDD  documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/autoclasstoc.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> Align-BDD
          </a>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../overview.html">Implementation: overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overview.html#computational-infrastructure">Computational infrastructure</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overview.html#general-reproducibility">General reproducibility</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overview.html#project-repository-structure">Project repository structure.</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overview.html#implementation-details">Implementation details</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overview.html#raw-data-formats">Raw data formats</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overview.html#code-organization">Code organization</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Align-BDD</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content style-external-links">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="index.html">Module code</a> &raquo;</li>
      <li>BDD_test</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <h1>Source code for BDD_test</h1><div class="highlight"><pre>
<span></span><span class="sd">&quot;&quot;&quot;Tests some key procedures for :py:mod:`BDD` .</span>

<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">import</span> <span class="nn">BDD</span>
<span class="kn">import</span> <span class="nn">pytest</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">random</span> <span class="kn">import</span> <span class="n">randint</span>
<span class="kn">import</span> <span class="nn">copy</span>

<div class="viewcode-block" id="test_load_save"><a class="viewcode-back" href="../_autosummary/BDD_test.html#BDD_test.test_load_save">[docs]</a><span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">parametrize</span><span class="p">(</span><span class="s2">&quot;D&quot;</span><span class="p">,</span> <span class="p">[</span><span class="n">BDD</span><span class="o">.</span><span class="n">BDD</span><span class="o">.</span><span class="n">random</span><span class="p">(</span><span class="n">N</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">+</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span>
                                              <span class="n">p</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(),</span>
                                              <span class="n">weighted</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">([</span><span class="kc">True</span><span class="p">,</span> <span class="kc">False</span><span class="p">]))</span>
                               <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">100</span><span class="p">)])</span>
<span class="k">def</span> <span class="nf">test_load_save</span><span class="p">(</span><span class="n">D</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Tests that load/save functionality works as intended.&quot;&quot;&quot;</span>
    <span class="n">D</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s2">&quot;tests/BDD_load_save.bdd&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;D is: </span><span class="si">{</span><span class="n">D</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">D2</span> <span class="o">=</span> <span class="n">BDD</span><span class="o">.</span><span class="n">BDD</span><span class="p">()</span>
    <span class="n">D2</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s2">&quot;tests/BDD_load_save.bdd&quot;</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">D</span><span class="o">.</span><span class="n">profile</span><span class="p">()</span> <span class="o">==</span> <span class="n">D2</span><span class="o">.</span><span class="n">profile</span><span class="p">()</span></div>


<div class="viewcode-block" id="test_shortest_path"><a class="viewcode-back" href="../_autosummary/BDD_test.html#BDD_test.test_shortest_path">[docs]</a><span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">parametrize</span><span class="p">(</span><span class="s2">&quot;test_inst&quot;</span><span class="p">,</span> <span class="p">[(</span><span class="mi">1</span><span class="o">+</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">15</span><span class="p">),</span>
                                        <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">())</span>
                                       <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">100</span><span class="p">)])</span>
<span class="k">def</span> <span class="nf">test_shortest_path</span><span class="p">(</span><span class="n">test_inst</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Tests the shortest path procedure (with Gurobi model)&quot;&quot;&quot;</span>
    <span class="n">N</span><span class="p">,</span> <span class="n">p</span> <span class="o">=</span> <span class="n">test_inst</span>
    <span class="n">A</span> <span class="o">=</span> <span class="n">BDD</span><span class="o">.</span><span class="n">BDD</span><span class="o">.</span><span class="n">random</span><span class="p">(</span><span class="n">N</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">weighted</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="kn">from</span> <span class="nn">UFL</span> <span class="kn">import</span> <span class="n">add_BDD_to_MIP</span>

    <span class="n">m</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="n">x</span> <span class="o">=</span> <span class="n">add_BDD_to_MIP</span><span class="p">(</span><span class="n">A</span><span class="p">)</span>
    <span class="n">m</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
    <span class="n">m</span><span class="o">.</span><span class="n">optimize</span><span class="p">()</span>

    <span class="n">nl</span> <span class="o">=</span> <span class="n">A</span><span class="o">.</span><span class="n">shortest_path</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">m</span><span class="o">.</span><span class="n">status</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
        <span class="c1"># optimal</span>
        <span class="k">assert</span> <span class="nb">abs</span><span class="p">(</span><span class="n">nl</span><span class="p">[</span><span class="n">BDD</span><span class="o">.</span><span class="n">NROOT</span><span class="p">]</span> <span class="o">-</span> <span class="n">m</span><span class="o">.</span><span class="n">objVal</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mf">0.001</span><span class="p">,</span> <span class="s2">&quot;SP={nl[NROOT], while Gurobi gave </span><span class="si">{m.objVal}</span><span class="s2">}&quot;</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">assert</span> <span class="n">nl</span><span class="p">[</span><span class="n">BDD</span><span class="o">.</span><span class="n">NROOT</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;âˆž&quot;</span><span class="p">,</span> <span class="s2">&quot;with Gurobi status </span><span class="si">{m.status}</span><span class="s2">, root node label is </span><span class="si">{nl[NROOT]}</span><span class="s2">&quot;</span></div>

<div class="viewcode-block" id="test_random_swapping"><a class="viewcode-back" href="../_autosummary/BDD_test.html#BDD_test.test_random_swapping">[docs]</a><span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">parametrize</span><span class="p">(</span><span class="s2">&quot;test_inst&quot;</span><span class="p">,</span> <span class="p">[(</span><span class="mi">1</span><span class="o">+</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">7</span><span class="p">),</span>
                                        <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">20</span><span class="p">),</span>
                                        <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(),</span>
                                        <span class="s1">&#39;swaps&#39;</span><span class="p">)</span>
                                       <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">50</span><span class="p">)]</span><span class="o">+</span> \
                         <span class="p">[(</span><span class="mi">1</span><span class="o">+</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">7</span><span class="p">),</span>
                           <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">20</span><span class="p">),</span>
                           <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(),</span>
                           <span class="s1">&#39;sifts&#39;</span><span class="p">)</span>
                          <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">50</span><span class="p">)]</span>
                         <span class="p">)</span>
<span class="k">def</span> <span class="nf">test_random_swapping</span><span class="p">(</span><span class="n">test_inst</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Tests if :py:func:`BDD.BDD.swap` work correctly (random problems).</span>

<span class="sd">    Generates a random BDD, makes some random swaps (or sifts),</span>
<span class="sd">    and then checks that the function encoded by the BDD remained the same</span>
<span class="sd">    (that is, every set of var values result in the same terminal node for</span>
<span class="sd">    the original BDD and for the randomly changed BDD).</span>

<span class="sd">    Args:</span>
<span class="sd">        N: no. of variables in the diagram</span>
<span class="sd">        m: no. of consecutive test swaps per BDD</span>
<span class="sd">        p: BDD expansion prob parameter</span>
<span class="sd">        mode: ``swaps`` or ``sifts``, determines what kind of events</span>
<span class="sd">                are to be generated</span>

<span class="sd">    Notes:</span>
<span class="sd">        - Arguments are packed into a single tuple (for compatibility)</span>
<span class="sd">            with ``pytest`` module.</span>
<span class="sd">        - Involves brute-force enumaration of all the 2^n possible decisions</span>
<span class="sd">            (concerning all vars), so choose ``n`` wisely (&lt;=8 seems OK)</span>

<span class="sd">    Example:</span>
<span class="sd">        test_random_swapping((8,20,0.8,sys.argv[1]))</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">N</span><span class="p">,</span> <span class="n">m</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">mode</span> <span class="o">=</span> <span class="n">test_inst</span>

    <span class="n">bdd</span> <span class="o">=</span> <span class="n">BDD</span><span class="o">.</span><span class="n">BDD</span><span class="o">.</span><span class="n">random</span><span class="p">(</span><span class="n">N</span><span class="p">,</span> <span class="n">p</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;BDD proflie is: </span><span class="si">{</span><span class="n">bdd</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>  <span class="c1"># so we could reconstruct the instance</span>
    <span class="n">bdd_s</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">bdd</span><span class="p">)</span>

    <span class="c1"># make some random layer swaps</span>
    <span class="k">assert</span> <span class="n">mode</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;swaps&#39;</span><span class="p">,</span> <span class="s1">&#39;sifts&#39;</span><span class="p">],</span> <span class="sa">f</span><span class="s2">&quot;Only &#39;swap&#39; and &#39;sift&#39; modes are allowed (got </span><span class="si">{</span><span class="n">mode</span><span class="si">}</span><span class="s2">)&quot;</span>

    <span class="k">if</span> <span class="n">mode</span> <span class="o">==</span> <span class="s1">&#39;swaps&#39;</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">m</span><span class="p">):</span>
            <span class="n">bdd_s</span><span class="o">.</span><span class="n">swap_up</span><span class="p">(</span><span class="n">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">bdd</span><span class="o">.</span><span class="n">vars</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">))</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">m</span><span class="p">):</span>
            <span class="n">bdd_s</span><span class="o">.</span><span class="n">sift</span><span class="p">(</span><span class="n">bdd_s</span><span class="o">.</span><span class="n">vars</span><span class="p">[</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span>
                                            <span class="nb">len</span><span class="p">(</span><span class="n">bdd</span><span class="o">.</span><span class="n">vars</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)],</span>
                        <span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span>
                                <span class="nb">len</span><span class="p">(</span><span class="n">bdd</span><span class="o">.</span><span class="n">vars</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">))</span>

    <span class="c1"># now check that everything remained the same</span>
    <span class="n">no_of_bits</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">bdd</span><span class="o">.</span><span class="n">vars</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">bit_path</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="o">**</span><span class="n">no_of_bits</span><span class="p">):</span>

        <span class="c1"># unpack the var values in the original order (1=hi, 0=lo)</span>
        <span class="n">var_vals</span> <span class="o">=</span> <span class="p">[(</span><span class="n">bit_path</span> <span class="o">&gt;&gt;</span> <span class="n">bit</span><span class="p">)</span> <span class="o">&amp;</span> <span class="mi">1</span>
                    <span class="k">for</span> <span class="n">bit</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">no_of_bits</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)]</span>

        <span class="c1"># get the correct answer (T or F)</span>
        <span class="n">cur_node_src</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">bdd</span><span class="o">.</span><span class="n">layers</span><span class="p">[</span><span class="mi">0</span><span class="p">])[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">cur_node_swd</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">bdd_s</span><span class="o">.</span><span class="n">layers</span><span class="p">[</span><span class="mi">0</span><span class="p">])[</span><span class="mi">0</span><span class="p">]</span>

        <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">while</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">bdd</span><span class="o">.</span><span class="n">vars</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">var_vals</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">cur_node_src</span> <span class="o">=</span> <span class="n">cur_node_src</span><span class="o">.</span><span class="n">lo</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">cur_node_src</span> <span class="o">=</span> <span class="n">cur_node_src</span><span class="o">.</span><span class="n">hi</span>

            <span class="k">if</span> <span class="n">var_vals</span><span class="p">[</span><span class="n">bdd</span><span class="o">.</span><span class="n">p</span><span class="p">(</span><span class="n">bdd_s</span><span class="o">.</span><span class="n">vars</span><span class="p">[</span><span class="n">i</span><span class="p">])]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">cur_node_swd</span> <span class="o">=</span> <span class="n">cur_node_swd</span><span class="o">.</span><span class="n">lo</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">cur_node_swd</span> <span class="o">=</span> <span class="n">cur_node_swd</span><span class="o">.</span><span class="n">hi</span>

            <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>

        <span class="n">corr_answer</span> <span class="o">=</span> <span class="n">cur_node_src</span><span class="o">.</span><span class="n">id</span>
        <span class="k">assert</span> <span class="n">corr_answer</span> <span class="o">==</span> <span class="n">BDD</span><span class="o">.</span><span class="n">NTRUE</span> <span class="ow">or</span> <span class="n">corr_answer</span> <span class="o">==</span> <span class="n">BDD</span><span class="o">.</span><span class="n">NFALSE</span>

        <span class="k">assert</span> <span class="n">cur_node_swd</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="n">corr_answer</span><span class="p">,</span> \
            <span class="s2">&quot;ERROR: </span><span class="si">{}</span><span class="s2">, not </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">cur_node_swd</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
                                         <span class="n">cur_node_src</span><span class="p">)</span> <span class="o">+</span> \
                                         <span class="s2">&quot;path </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">var_vals</span><span class="p">)</span></div>


<div class="viewcode-block" id="test_swaps_w"><a class="viewcode-back" href="../_autosummary/BDD_test.html#BDD_test.test_swaps_w">[docs]</a><span class="k">def</span> <span class="nf">test_swaps_w</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Tests :py:func:`BDD.BDD.swap` for a weighted BDD (a simple case).</span>

<span class="sd">    Uses a simple problem instance (``tests/simple_DD.wbdd``)</span>
<span class="sd">    to run a test: all paths costs and terminals must coincide</span>
<span class="sd">    after a series of swaps.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">A</span> <span class="o">=</span> <span class="n">BDD</span><span class="o">.</span><span class="n">BDD</span><span class="p">()</span>
    <span class="n">A</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s2">&quot;./tests/simple_DD.wbdd&quot;</span><span class="p">,</span> <span class="n">weighted</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="n">B</span> <span class="o">=</span> <span class="n">BDD</span><span class="o">.</span><span class="n">BDD</span><span class="p">()</span>
    <span class="n">B</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s2">&quot;./tests/simple_DD.wbdd&quot;</span><span class="p">,</span> <span class="n">weighted</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">eq</span><span class="p">,</span> <span class="n">msg</span> <span class="o">=</span> <span class="n">A</span><span class="o">.</span><span class="n">is_equivalent</span><span class="p">(</span><span class="n">B</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">eq</span><span class="p">,</span> <span class="n">msg</span>

    <span class="n">B</span><span class="o">.</span><span class="n">swap_up</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">eq</span><span class="p">,</span> <span class="n">msg</span> <span class="o">=</span> <span class="n">A</span><span class="o">.</span><span class="n">is_equivalent</span><span class="p">(</span><span class="n">B</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">eq</span><span class="p">,</span> <span class="n">msg</span>

    <span class="n">B</span><span class="o">.</span><span class="n">swap_up</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">eq</span><span class="p">,</span> <span class="n">msg</span> <span class="o">=</span> <span class="n">A</span><span class="o">.</span><span class="n">is_equivalent</span><span class="p">(</span><span class="n">B</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">eq</span><span class="p">,</span> <span class="n">msg</span>

    <span class="n">B</span><span class="o">.</span><span class="n">swap_up</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">B</span><span class="o">.</span><span class="n">swap_up</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
    <span class="n">eq</span><span class="p">,</span> <span class="n">msg</span> <span class="o">=</span> <span class="n">A</span><span class="o">.</span><span class="n">is_equivalent</span><span class="p">(</span><span class="n">B</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">eq</span><span class="p">,</span> <span class="n">msg</span></div>


<div class="viewcode-block" id="test_swaps_weighted"><a class="viewcode-back" href="../_autosummary/BDD_test.html#BDD_test.test_swaps_weighted">[docs]</a><span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">parametrize</span><span class="p">(</span><span class="s2">&quot;i&quot;</span><span class="p">,</span> <span class="p">[</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">100</span><span class="p">)])</span>
<span class="k">def</span> <span class="nf">test_swaps_weighted</span><span class="p">(</span><span class="n">i</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Tests swap operation for weighted diagrams (random instances).&quot;&quot;&quot;</span>
    <span class="n">A</span> <span class="o">=</span> <span class="n">BDD</span><span class="o">.</span><span class="n">BDD</span><span class="o">.</span><span class="n">random</span><span class="p">(</span><span class="n">N</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">weighted</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">B</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">A</span><span class="p">)</span>

    <span class="n">B</span><span class="o">.</span><span class="n">swap_up</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">eq</span><span class="p">,</span> <span class="n">msg</span> <span class="o">=</span> <span class="n">A</span><span class="o">.</span><span class="n">is_equivalent</span><span class="p">(</span><span class="n">B</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">eq</span><span class="p">,</span> <span class="n">msg</span>

    <span class="n">B</span><span class="o">.</span><span class="n">swap_up</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">A</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">eq</span><span class="p">,</span> <span class="n">msg</span> <span class="o">=</span> <span class="n">A</span><span class="o">.</span><span class="n">is_equivalent</span><span class="p">(</span><span class="n">B</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">eq</span><span class="p">,</span> <span class="n">msg</span>

    <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">):</span>
        <span class="n">C</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">B</span><span class="p">)</span>
        <span class="n">what</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">A</span><span class="p">))</span>
        <span class="n">B</span><span class="o">.</span><span class="n">swap_up</span><span class="p">(</span><span class="n">what</span><span class="p">)</span>
        <span class="n">eq</span><span class="p">,</span> <span class="n">msg</span> <span class="o">=</span> <span class="n">A</span><span class="o">.</span><span class="n">is_equivalent</span><span class="p">(</span><span class="n">B</span><span class="p">)</span>
        <span class="k">assert</span> <span class="n">eq</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">: for swap at </span><span class="si">{</span><span class="n">pos</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">msg</span><span class="si">}</span><span class="s2">&quot;</span></div>


<div class="viewcode-block" id="test_alignto"><a class="viewcode-back" href="../_autosummary/BDD_test.html#BDD_test.test_alignto">[docs]</a><span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">parametrize</span><span class="p">(</span><span class="s2">&quot;i&quot;</span><span class="p">,</span> <span class="p">[</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">100</span><span class="p">)])</span>
<span class="k">def</span> <span class="nf">test_alignto</span><span class="p">(</span><span class="n">i</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Tests align_to operation (random instances).&quot;&quot;&quot;</span>
    <span class="n">A</span> <span class="o">=</span> <span class="n">BDD</span><span class="o">.</span><span class="n">BDD</span><span class="o">.</span><span class="n">random</span><span class="p">(</span><span class="n">N</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">weighted</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">B</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">A</span><span class="p">)</span>

    <span class="n">B</span><span class="o">.</span><span class="n">align_to</span><span class="p">(</span><span class="n">A</span><span class="o">.</span><span class="n">vars</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">eq</span><span class="p">,</span> <span class="n">msg</span> <span class="o">=</span> <span class="n">A</span><span class="o">.</span><span class="n">is_equivalent</span><span class="p">(</span><span class="n">B</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">eq</span><span class="p">,</span> <span class="n">msg</span>
    <span class="k">assert</span> <span class="n">A</span><span class="o">.</span><span class="n">vars</span> <span class="o">==</span> <span class="n">B</span><span class="o">.</span><span class="n">vars</span>

    <span class="n">B</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">A</span><span class="p">)</span>
    <span class="n">B</span> <span class="o">=</span> <span class="n">B</span><span class="o">.</span><span class="n">align_to</span><span class="p">(</span><span class="n">A</span><span class="o">.</span><span class="n">vars</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">eq</span><span class="p">,</span> <span class="n">msg</span> <span class="o">=</span> <span class="n">A</span><span class="o">.</span><span class="n">is_equivalent</span><span class="p">(</span><span class="n">B</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">eq</span><span class="p">,</span> <span class="n">msg</span>
    <span class="k">assert</span> <span class="n">A</span><span class="o">.</span><span class="n">vars</span> <span class="o">==</span> <span class="n">B</span><span class="o">.</span><span class="n">vars</span></div>

<div class="viewcode-block" id="test_swaps_uweighted"><a class="viewcode-back" href="../_autosummary/BDD_test.html#BDD_test.test_swaps_uweighted">[docs]</a><span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">parametrize</span><span class="p">(</span><span class="s2">&quot;i&quot;</span><span class="p">,</span> <span class="p">[</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">100</span><span class="p">)])</span>
<span class="k">def</span> <span class="nf">test_swaps_uweighted</span><span class="p">(</span><span class="n">i</span><span class="p">):</span>
    <span class="n">A</span> <span class="o">=</span> <span class="n">BDD</span><span class="o">.</span><span class="n">BDD</span><span class="o">.</span><span class="n">random</span><span class="p">(</span><span class="n">N</span><span class="o">=</span><span class="mi">7</span><span class="p">,</span> <span class="n">weighted</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">B</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">A</span><span class="p">)</span>

    <span class="n">B</span><span class="o">.</span><span class="n">swap_up</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">eq</span><span class="p">,</span> <span class="n">msg</span> <span class="o">=</span> <span class="n">A</span><span class="o">.</span><span class="n">is_equivalent</span><span class="p">(</span><span class="n">B</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">eq</span><span class="p">,</span> <span class="n">msg</span>

    <span class="n">B</span><span class="o">.</span><span class="n">swap_up</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">A</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">eq</span><span class="p">,</span> <span class="n">msg</span> <span class="o">=</span> <span class="n">A</span><span class="o">.</span><span class="n">is_equivalent</span><span class="p">(</span><span class="n">B</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">eq</span><span class="p">,</span> <span class="n">msg</span>

    <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">):</span>
        <span class="n">what</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">A</span><span class="p">))</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">: swapping up </span><span class="si">{</span><span class="n">what</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">B</span><span class="o">.</span><span class="n">swap_up</span><span class="p">(</span><span class="n">what</span><span class="p">)</span>
        <span class="n">eq</span><span class="p">,</span> <span class="n">msg</span> <span class="o">=</span> <span class="n">A</span><span class="o">.</span><span class="n">is_equivalent</span><span class="p">(</span><span class="n">B</span><span class="p">)</span>
        <span class="k">assert</span> <span class="n">eq</span><span class="p">,</span> <span class="n">msg</span></div>


<div class="viewcode-block" id="test_intersect"><a class="viewcode-back" href="../_autosummary/BDD_test.html#BDD_test.test_intersect">[docs]</a><span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">parametrize</span><span class="p">(</span><span class="s2">&quot;i&quot;</span><span class="p">,</span> <span class="p">[</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">100</span><span class="p">)])</span>
<span class="k">def</span> <span class="nf">test_intersect</span><span class="p">(</span><span class="n">i</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Tests intersection function, :py:func:`BDD.intersect`.&quot;&quot;&quot;</span>
    <span class="n">A</span> <span class="o">=</span> <span class="n">BDD</span><span class="o">.</span><span class="n">BDD</span><span class="o">.</span><span class="n">random</span><span class="p">(</span><span class="n">N</span><span class="o">=</span><span class="mi">7</span><span class="p">,</span> <span class="n">weighted</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">B</span> <span class="o">=</span> <span class="n">BDD</span><span class="o">.</span><span class="n">BDD</span><span class="o">.</span><span class="n">random</span><span class="p">(</span><span class="n">N</span><span class="o">=</span><span class="mi">7</span><span class="p">,</span> <span class="n">weighted</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="n">C</span> <span class="o">=</span> <span class="n">BDD</span><span class="o">.</span><span class="n">intersect</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">B</span><span class="p">)</span>

    <span class="n">tt_A</span> <span class="o">=</span> <span class="n">A</span><span class="o">.</span><span class="n">truth_table</span><span class="p">()</span>
    <span class="n">tt_B</span> <span class="o">=</span> <span class="n">B</span><span class="o">.</span><span class="n">truth_table</span><span class="p">()</span>
    <span class="n">tt_C</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">truth_table</span><span class="p">()</span>

    <span class="k">for</span> <span class="n">idx</span> <span class="ow">in</span> <span class="n">tt_C</span><span class="o">.</span><span class="n">index</span><span class="p">:</span>
        <span class="k">assert</span> <span class="p">(</span><span class="n">tt_C</span><span class="p">[</span><span class="s2">&quot;Terminal&quot;</span><span class="p">][</span><span class="n">idx</span><span class="p">]</span> <span class="o">==</span> <span class="p">(</span><span class="n">tt_A</span><span class="p">[</span><span class="s2">&quot;Terminal&quot;</span><span class="p">][</span><span class="n">idx</span><span class="p">]</span> <span class="ow">and</span> <span class="n">tt_B</span><span class="p">[</span><span class="s2">&quot;Terminal&quot;</span><span class="p">][</span><span class="n">idx</span><span class="p">])),</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2"> failed&quot;</span>
        <span class="k">assert</span> <span class="nb">abs</span><span class="p">(</span><span class="n">tt_C</span><span class="p">[</span><span class="s2">&quot;Cost&quot;</span><span class="p">][</span><span class="n">idx</span><span class="p">]</span> <span class="o">-</span> <span class="p">(</span><span class="n">tt_A</span><span class="p">[</span><span class="s2">&quot;Cost&quot;</span><span class="p">][</span><span class="n">idx</span><span class="p">]</span> <span class="o">+</span> <span class="n">tt_B</span><span class="p">[</span><span class="s2">&quot;Cost&quot;</span><span class="p">][</span><span class="n">idx</span><span class="p">]))</span><span class="o">&lt;</span><span class="mf">1e-5</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2"> failed&quot;</span></div>

<span class="c1">#################################################################</span>
<span class="c1">## Ad-hoc testing / visual inspection</span>

<div class="viewcode-block" id="save_load"><a class="viewcode-back" href="../_autosummary/BDD_test.html#BDD_test.save_load">[docs]</a><span class="k">def</span> <span class="nf">save_load</span><span class="p">(</span><span class="n">bdd</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Quickly tests the load-save functionality (for visual inspection).</span>

<span class="sd">    must result in two equivalent graphs (BDDs) on the screen</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">bdd</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s2">&quot;./tmp/test_save.bdd&quot;</span><span class="p">)</span>
    <span class="n">bdd2</span> <span class="o">=</span> <span class="n">BDD</span><span class="o">.</span><span class="n">BDD</span><span class="p">()</span>
    <span class="n">bdd2</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s2">&quot;./tmp/test_save.bdd&quot;</span><span class="p">)</span>
    <span class="c1"># bdd.dump_gv().view(&quot;./tmp/before_save.dot&quot;,cleanup=True)</span>
    <span class="c1"># bdd2.dump_gv().view(&quot;./tmp/after_save.dot&quot;,cleanup=True)</span>
    <span class="n">eq</span><span class="p">,</span> <span class="n">msg</span> <span class="o">=</span> <span class="n">bdd</span><span class="o">.</span><span class="n">is_equivalent</span><span class="p">(</span><span class="n">bdd2</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">eq</span><span class="p">,</span> <span class="n">msg</span></div>


<div class="viewcode-block" id="gen_4BDD"><a class="viewcode-back" href="../_autosummary/BDD_test.html#BDD_test.gen_4BDD">[docs]</a><span class="k">def</span> <span class="nf">gen_4BDD</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;creates a simple 4-var BDD&quot;&quot;&quot;</span>

    <span class="n">bdd</span> <span class="o">=</span> <span class="n">BDD</span><span class="o">.</span><span class="n">BDD</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
    <span class="n">root</span> <span class="o">=</span> <span class="n">bdd</span><span class="o">.</span><span class="n">addnode</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>
    <span class="n">nh</span> <span class="o">=</span> <span class="n">bdd</span><span class="o">.</span><span class="n">addnode</span><span class="p">(</span><span class="n">root</span><span class="p">,</span><span class="s2">&quot;hi&quot;</span><span class="p">)</span>
    <span class="n">nl</span> <span class="o">=</span> <span class="n">bdd</span><span class="o">.</span><span class="n">addnode</span><span class="p">(</span><span class="n">root</span><span class="p">,</span><span class="s2">&quot;lo&quot;</span><span class="p">)</span>

    <span class="n">nh2</span> <span class="o">=</span> <span class="n">bdd</span><span class="o">.</span><span class="n">addnode</span><span class="p">(</span><span class="n">nh</span><span class="p">,</span><span class="s2">&quot;hi&quot;</span><span class="p">)</span>
    <span class="n">bdd</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="n">nh</span><span class="o">.</span><span class="n">id</span><span class="p">]</span><span class="o">.</span><span class="n">lo</span> <span class="o">=</span> <span class="n">nh2</span>

    <span class="n">nl2</span> <span class="o">=</span> <span class="n">bdd</span><span class="o">.</span><span class="n">addnode</span><span class="p">(</span><span class="n">nl</span><span class="p">,</span> <span class="s2">&quot;hi&quot;</span><span class="p">)</span>
    <span class="n">nl</span><span class="o">.</span><span class="n">link</span><span class="p">(</span><span class="n">nl2</span><span class="p">,</span><span class="s2">&quot;lo&quot;</span><span class="p">)</span>

    <span class="n">nl</span> <span class="o">=</span> <span class="n">bdd</span><span class="o">.</span><span class="n">addnode</span><span class="p">(</span><span class="n">nl2</span><span class="p">,</span><span class="s2">&quot;hi&quot;</span><span class="p">)</span>
    <span class="n">nl2</span><span class="o">.</span><span class="n">link</span><span class="p">(</span><span class="n">nl</span><span class="p">,</span><span class="s2">&quot;lo&quot;</span><span class="p">)</span>

    <span class="n">nh</span> <span class="o">=</span> <span class="n">bdd</span><span class="o">.</span><span class="n">addnode</span><span class="p">(</span><span class="n">nh2</span><span class="p">,</span><span class="s2">&quot;lo&quot;</span><span class="p">)</span>
    <span class="n">nh2</span><span class="o">.</span><span class="n">link</span><span class="p">(</span><span class="n">nh</span><span class="p">,</span><span class="s2">&quot;hi&quot;</span><span class="p">)</span>

    <span class="n">nl</span><span class="o">.</span><span class="n">link</span><span class="p">(</span><span class="n">bdd</span><span class="o">.</span><span class="n">T</span><span class="p">,</span><span class="s2">&quot;lo&quot;</span><span class="p">)</span>
    <span class="n">nl</span><span class="o">.</span><span class="n">link</span><span class="p">(</span><span class="n">bdd</span><span class="o">.</span><span class="n">F</span><span class="p">,</span><span class="s2">&quot;hi&quot;</span><span class="p">)</span>

    <span class="n">nh</span><span class="o">.</span><span class="n">link</span><span class="p">(</span><span class="n">bdd</span><span class="o">.</span><span class="n">T</span><span class="p">,</span><span class="s2">&quot;lo&quot;</span><span class="p">)</span>
    <span class="n">nh</span><span class="o">.</span><span class="n">link</span><span class="p">(</span><span class="n">bdd</span><span class="o">.</span><span class="n">F</span><span class="p">,</span> <span class="s2">&quot;hi&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">bdd</span></div>


<div class="viewcode-block" id="test_save_load_noargs"><a class="viewcode-back" href="../_autosummary/BDD_test.html#BDD_test.test_save_load_noargs">[docs]</a><span class="k">def</span> <span class="nf">test_save_load_noargs</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Tests load/save for a specific situation.&quot;&quot;&quot;</span>
    <span class="n">bdd</span> <span class="o">=</span> <span class="n">gen_4BDD</span><span class="p">()</span>
    <span class="n">bdd</span><span class="o">.</span><span class="n">sift</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">save_load</span><span class="p">(</span><span class="n">bdd</span><span class="p">)</span></div>


<span class="c1"># BDD creation and rendering (with graphviz)</span>
<div class="viewcode-block" id="show_create_render"><a class="viewcode-back" href="../_autosummary/BDD_test.html#BDD_test.show_create_render">[docs]</a><span class="k">def</span> <span class="nf">show_create_render</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Tests the BDD creation and rendering code.&quot;&quot;&quot;</span>
    <span class="n">bdd</span> <span class="o">=</span> <span class="n">BDD</span><span class="o">.</span><span class="n">BDD</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
    <span class="n">root</span> <span class="o">=</span> <span class="n">bdd</span><span class="o">.</span><span class="n">addnode</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>
    <span class="n">nh</span> <span class="o">=</span> <span class="n">bdd</span><span class="o">.</span><span class="n">addnode</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="s2">&quot;hi&quot;</span><span class="p">)</span>
    <span class="n">nl</span> <span class="o">=</span> <span class="n">bdd</span><span class="o">.</span><span class="n">addnode</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="s2">&quot;lo&quot;</span><span class="p">)</span>

    <span class="n">nh2</span> <span class="o">=</span> <span class="n">bdd</span><span class="o">.</span><span class="n">addnode</span><span class="p">(</span><span class="n">nh</span><span class="p">,</span> <span class="s2">&quot;hi&quot;</span><span class="p">)</span>
    <span class="n">bdd</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="n">nh</span><span class="o">.</span><span class="n">id</span><span class="p">]</span><span class="o">.</span><span class="n">lo</span> <span class="o">=</span> <span class="n">nh2</span>

    <span class="n">nl2</span> <span class="o">=</span> <span class="n">bdd</span><span class="o">.</span><span class="n">addnode</span><span class="p">(</span><span class="n">nl</span><span class="p">,</span> <span class="s2">&quot;hi&quot;</span><span class="p">)</span>
    <span class="n">nl</span><span class="o">.</span><span class="n">link</span><span class="p">(</span><span class="n">nl2</span><span class="p">,</span><span class="s2">&quot;lo&quot;</span><span class="p">)</span>

    <span class="n">nl</span> <span class="o">=</span> <span class="n">bdd</span><span class="o">.</span><span class="n">addnode</span><span class="p">(</span><span class="n">nl2</span><span class="p">,</span> <span class="s2">&quot;hi&quot;</span><span class="p">)</span>
    <span class="n">nl2</span><span class="o">.</span><span class="n">link</span><span class="p">(</span><span class="n">nl</span><span class="p">,</span> <span class="s2">&quot;lo&quot;</span><span class="p">)</span>

    <span class="n">nh</span> <span class="o">=</span> <span class="n">bdd</span><span class="o">.</span><span class="n">addnode</span><span class="p">(</span><span class="n">nh2</span><span class="p">,</span><span class="s2">&quot;lo&quot;</span><span class="p">)</span>
    <span class="n">nh2</span><span class="o">.</span><span class="n">link</span><span class="p">(</span><span class="n">nh</span><span class="p">,</span><span class="s2">&quot;hi&quot;</span><span class="p">)</span>

    <span class="n">nl</span><span class="o">.</span><span class="n">link</span><span class="p">(</span><span class="n">bdd</span><span class="o">.</span><span class="n">T</span><span class="p">,</span><span class="s2">&quot;lo&quot;</span><span class="p">)</span>
    <span class="n">nl</span><span class="o">.</span><span class="n">link</span><span class="p">(</span><span class="n">bdd</span><span class="o">.</span><span class="n">F</span><span class="p">,</span><span class="s2">&quot;hi&quot;</span><span class="p">)</span>

    <span class="n">nh</span><span class="o">.</span><span class="n">link</span><span class="p">(</span><span class="n">bdd</span><span class="o">.</span><span class="n">T</span><span class="p">,</span><span class="s2">&quot;lo&quot;</span><span class="p">)</span>
    <span class="n">nh</span><span class="o">.</span><span class="n">link</span><span class="p">(</span><span class="n">bdd</span><span class="o">.</span><span class="n">F</span><span class="p">,</span> <span class="s2">&quot;hi&quot;</span><span class="p">)</span>

    <span class="n">g</span> <span class="o">=</span> <span class="n">bdd</span><span class="o">.</span><span class="n">dump_gv</span><span class="p">()</span>

    <span class="n">g</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s2">&quot;./initial.dot&quot;</span><span class="p">,</span><span class="n">view</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></div>

<div class="viewcode-block" id="show_swap_sift"><a class="viewcode-back" href="../_autosummary/BDD_test.html#BDD_test.show_swap_sift">[docs]</a><span class="k">def</span> <span class="nf">show_swap_sift</span><span class="p">(</span><span class="n">bdd</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;quick test of swap and sift operations&quot;&quot;&quot;</span>
    <span class="c1">## swap operation</span>
    <span class="n">bdd</span><span class="o">.</span><span class="n">swap_up</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>

    <span class="n">g</span> <span class="o">=</span> <span class="n">bdd</span><span class="o">.</span><span class="n">dump_gv</span><span class="p">()</span>
    <span class="n">g</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s2">&quot;./swapped.dot&quot;</span><span class="p">,</span> <span class="n">view</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="n">bdd</span><span class="o">.</span><span class="n">swap_up</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

    <span class="n">g</span> <span class="o">=</span> <span class="n">bdd</span><span class="o">.</span><span class="n">dump_gv</span><span class="p">()</span>
    <span class="n">g</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s2">&quot;./swapped_top.dot&quot;</span><span class="p">,</span> <span class="n">view</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="c1">## sift operatio</span>
    <span class="n">bdd</span><span class="o">.</span><span class="n">sift</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span>
    <span class="n">g</span> <span class="o">=</span> <span class="n">bdd</span><span class="o">.</span><span class="n">dump_gv</span><span class="p">()</span>
    <span class="n">g</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s2">&quot;./sifted.dot&quot;</span><span class="p">,</span> <span class="n">view</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="c1">### more complex sifting example</span>

    <span class="n">bdd</span> <span class="o">=</span> <span class="n">BDD</span><span class="o">.</span><span class="n">BDD</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
    <span class="n">root</span> <span class="o">=</span> <span class="n">bdd</span><span class="o">.</span><span class="n">addnode</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>
    <span class="n">n1</span> <span class="o">=</span> <span class="n">bdd</span><span class="o">.</span><span class="n">addnode</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="s2">&quot;hi&quot;</span><span class="p">)</span>
    <span class="n">n2</span> <span class="o">=</span> <span class="n">bdd</span><span class="o">.</span><span class="n">addnode</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="s2">&quot;lo&quot;</span><span class="p">)</span>

    <span class="n">n3</span> <span class="o">=</span> <span class="n">bdd</span><span class="o">.</span><span class="n">addnode</span><span class="p">(</span><span class="n">n1</span><span class="p">,</span><span class="s2">&quot;hi&quot;</span><span class="p">)</span>
    <span class="n">n4</span> <span class="o">=</span> <span class="n">bdd</span><span class="o">.</span><span class="n">addnode</span><span class="p">(</span><span class="n">n1</span><span class="p">,</span><span class="s2">&quot;lo&quot;</span><span class="p">)</span>
    <span class="n">n5</span> <span class="o">=</span> <span class="n">bdd</span><span class="o">.</span><span class="n">addnode</span><span class="p">(</span><span class="n">n2</span><span class="p">,</span><span class="s2">&quot;hi&quot;</span><span class="p">)</span>
    <span class="n">n2</span><span class="o">.</span><span class="n">link</span><span class="p">(</span><span class="n">n4</span><span class="p">,</span><span class="s2">&quot;lo&quot;</span><span class="p">)</span>

    <span class="n">n6</span> <span class="o">=</span> <span class="n">bdd</span><span class="o">.</span><span class="n">addnode</span><span class="p">(</span><span class="n">n3</span><span class="p">,</span><span class="s2">&quot;hi&quot;</span><span class="p">)</span>
    <span class="n">n3</span><span class="o">.</span><span class="n">link</span><span class="p">(</span><span class="n">n6</span><span class="p">,</span><span class="s2">&quot;lo&quot;</span><span class="p">)</span>

    <span class="n">n7</span> <span class="o">=</span> <span class="n">bdd</span><span class="o">.</span><span class="n">addnode</span><span class="p">(</span><span class="n">n4</span><span class="p">,</span><span class="s2">&quot;hi&quot;</span><span class="p">)</span>
    <span class="n">n4</span><span class="o">.</span><span class="n">link</span><span class="p">(</span><span class="n">n7</span><span class="p">,</span><span class="s2">&quot;lo&quot;</span><span class="p">)</span>

    <span class="n">n8</span> <span class="o">=</span> <span class="n">bdd</span><span class="o">.</span><span class="n">addnode</span><span class="p">(</span><span class="n">n5</span><span class="p">,</span> <span class="s2">&quot;lo&quot;</span><span class="p">)</span>
    <span class="n">n5</span><span class="o">.</span><span class="n">link</span><span class="p">(</span><span class="n">n7</span><span class="p">,</span><span class="s2">&quot;hi&quot;</span><span class="p">)</span>

    <span class="n">n6</span><span class="o">.</span><span class="n">link</span><span class="p">(</span><span class="n">bdd</span><span class="o">.</span><span class="n">F</span><span class="p">,</span><span class="s2">&quot;hi&quot;</span><span class="p">)</span>
    <span class="n">n6</span><span class="o">.</span><span class="n">link</span><span class="p">(</span><span class="n">bdd</span><span class="o">.</span><span class="n">F</span><span class="p">,</span><span class="s2">&quot;lo&quot;</span><span class="p">)</span>

    <span class="n">n7</span><span class="o">.</span><span class="n">link</span><span class="p">(</span><span class="n">bdd</span><span class="o">.</span><span class="n">F</span><span class="p">,</span><span class="s2">&quot;hi&quot;</span><span class="p">)</span>
    <span class="n">n7</span><span class="o">.</span><span class="n">link</span><span class="p">(</span><span class="n">bdd</span><span class="o">.</span><span class="n">F</span><span class="p">,</span><span class="s2">&quot;lo&quot;</span><span class="p">)</span>

    <span class="n">n8</span><span class="o">.</span><span class="n">link</span><span class="p">(</span><span class="n">bdd</span><span class="o">.</span><span class="n">F</span><span class="p">,</span><span class="s2">&quot;lo&quot;</span><span class="p">)</span>
    <span class="n">n8</span><span class="o">.</span><span class="n">link</span><span class="p">(</span><span class="n">bdd</span><span class="o">.</span><span class="n">T</span><span class="p">,</span><span class="s2">&quot;hi&quot;</span><span class="p">)</span>

    <span class="c1"># g = bdd.dump_gv()</span>
    <span class="c1"># g.view()</span>

    <span class="n">bdd</span><span class="o">.</span><span class="n">sift</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>

    <span class="n">g</span> <span class="o">=</span> <span class="n">bdd</span><span class="o">.</span><span class="n">dump_gv</span><span class="p">()</span>
    <span class="n">g</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s2">&quot;./after_sifting.dot&quot;</span><span class="p">,</span><span class="n">view</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></div>


<div class="viewcode-block" id="show_intersections"><a class="viewcode-back" href="../_autosummary/BDD_test.html#BDD_test.show_intersections">[docs]</a><span class="k">def</span> <span class="nf">show_intersections</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Tests intersection function.&quot;&quot;&quot;</span>
    <span class="n">A</span> <span class="o">=</span> <span class="n">BDD</span><span class="o">.</span><span class="n">BDD</span><span class="p">()</span>
    <span class="n">A</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s2">&quot;./tests/int_A.wbdd&quot;</span><span class="p">,</span> <span class="n">weighted</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">B</span> <span class="o">=</span> <span class="n">BDD</span><span class="o">.</span><span class="n">BDD</span><span class="p">()</span>
    <span class="n">B</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s2">&quot;./tests/int_B.wbdd&quot;</span><span class="p">,</span> <span class="n">weighted</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="n">C</span> <span class="o">=</span> <span class="n">intersect</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">B</span><span class="p">)</span>
    <span class="n">A</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="nb">dir</span><span class="o">=</span><span class="s2">&quot;tmp&quot;</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="s2">&quot;A.dot&quot;</span><span class="p">)</span>
    <span class="n">B</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="nb">dir</span><span class="o">=</span><span class="s2">&quot;tmp&quot;</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="s2">&quot;B.dot&quot;</span><span class="p">)</span>
    <span class="n">C</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="nb">dir</span><span class="o">=</span><span class="s2">&quot;tmp&quot;</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="s2">&quot;C.dot&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="show_rnd"><a class="viewcode-back" href="../_autosummary/BDD_test.html#BDD_test.show_rnd">[docs]</a><span class="k">def</span> <span class="nf">show_rnd</span><span class="p">():</span>
    <span class="n">bdd</span> <span class="o">=</span> <span class="n">BDD</span><span class="o">.</span><span class="n">BDD</span><span class="o">.</span><span class="n">random</span><span class="p">(</span><span class="n">N</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span><span class="n">p</span><span class="o">=</span><span class="mf">0.8</span><span class="p">)</span>
    <span class="n">bdd</span><span class="o">.</span><span class="n">dump_gv</span><span class="p">()</span><span class="o">.</span><span class="n">view</span><span class="p">(</span><span class="s2">&quot;./random.dot&quot;</span><span class="p">,</span><span class="n">directory</span><span class="o">=</span><span class="s2">&quot;./tmp&quot;</span><span class="p">,</span><span class="n">cleanup</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span></div>

<div class="viewcode-block" id="show_align"><a class="viewcode-back" href="../_autosummary/BDD_test.html#BDD_test.show_align">[docs]</a><span class="k">def</span> <span class="nf">show_align</span><span class="p">():</span>
    <span class="n">bdd_A</span> <span class="o">=</span> <span class="n">BDD</span><span class="o">.</span><span class="n">BDD</span><span class="o">.</span><span class="n">random</span><span class="p">(</span><span class="n">N</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span><span class="n">p</span><span class="o">=</span><span class="mf">0.8</span><span class="p">)</span>
    <span class="n">bdd_B</span> <span class="o">=</span> <span class="n">BDD</span><span class="o">.</span><span class="n">BDD</span><span class="o">.</span><span class="n">random</span><span class="p">(</span><span class="n">N</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span><span class="n">p</span><span class="o">=</span><span class="mf">0.8</span><span class="p">)</span>

    <span class="n">alts</span><span class="p">,</span> <span class="n">Aa</span><span class="p">,</span> <span class="n">Ba</span> <span class="o">=</span> <span class="n">bdd_A</span><span class="o">.</span><span class="n">OA_bruteforce</span><span class="p">(</span><span class="n">bdd_B</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Opt order: </span><span class="si">{}</span><span class="s2">, opt size:</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">Aa</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">vars</span><span class="p">,</span> <span class="n">Aa</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">size</span><span class="p">()</span><span class="o">+</span><span class="n">Ba</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">size</span><span class="p">()))</span>

    <span class="n">bdd_A</span><span class="o">.</span><span class="n">dump_gv</span><span class="p">()</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s2">&quot;./tmp/A.dot&quot;</span><span class="p">,</span><span class="n">view</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">bdd_B</span><span class="o">.</span><span class="n">dump_gv</span><span class="p">()</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s2">&quot;./tmp/B.dot&quot;</span><span class="p">,</span><span class="n">view</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">Aa</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">dump_gv</span><span class="p">()</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s2">&quot;./tmp/Aa.dot&quot;</span><span class="p">,</span><span class="n">view</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">Ba</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">dump_gv</span><span class="p">()</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s2">&quot;./tmp/Ba.dot&quot;</span><span class="p">,</span> <span class="n">view</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></div>


<div class="viewcode-block" id="show_bruteforcing"><a class="viewcode-back" href="../_autosummary/BDD_test.html#BDD_test.show_bruteforcing">[docs]</a><span class="k">def</span> <span class="nf">show_bruteforcing</span><span class="p">():</span>
    <span class="n">bdd</span> <span class="o">=</span> <span class="n">BDD</span><span class="o">.</span><span class="n">BDD</span><span class="o">.</span><span class="n">random</span><span class="p">(</span><span class="n">N</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">p</span><span class="o">=</span><span class="mf">0.8</span><span class="p">)</span> <span class="c1"># it works for gen_4BDD(), though</span>

    <span class="n">perms</span> <span class="o">=</span> <span class="n">iters</span><span class="o">.</span><span class="n">permutations</span><span class="p">(</span><span class="n">bdd</span><span class="o">.</span><span class="n">vars</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">perms</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Aligning to: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">p</span><span class="p">))</span>
        <span class="n">bdd</span> <span class="o">=</span> <span class="n">bdd</span><span class="o">.</span><span class="n">align_to</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">p</span><span class="p">))</span>
        <span class="n">bdd</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
        <span class="nb">input</span><span class="p">(</span><span class="s2">&quot;Press Enter to continue...&quot;</span><span class="p">)</span></div>

<div class="viewcode-block" id="show_rnd_naming"><a class="viewcode-back" href="../_autosummary/BDD_test.html#BDD_test.show_rnd_naming">[docs]</a><span class="k">def</span> <span class="nf">show_rnd_naming</span><span class="p">():</span>
    <span class="n">mybdd</span> <span class="o">=</span> <span class="n">BDD</span><span class="o">.</span><span class="n">BDD</span><span class="o">.</span><span class="n">random</span><span class="p">(</span><span class="n">N</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span><span class="n">p</span><span class="o">=</span><span class="mf">0.8</span><span class="p">)</span>
    <span class="n">mybdd</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

    <span class="n">mybdd_al</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">mybdd</span><span class="p">)</span>
    <span class="n">mybdd_al</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

    <span class="n">mybdd_al</span><span class="o">.</span><span class="n">swap_up</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
    <span class="c1"># mybdd_al = mybdd.align_to([2,1,3,4])</span>
    <span class="n">mybdd_al</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
    <span class="n">mybdd_al</span><span class="o">.</span><span class="n">swap_up</span><span class="p">(</span><span class="n">mybdd_al</span><span class="o">.</span><span class="n">p</span><span class="p">(</span><span class="mi">3</span><span class="p">))</span>
    <span class="n">mybdd_al</span><span class="o">.</span><span class="n">show</span><span class="p">()</span></div>

<div class="viewcode-block" id="show_swapping_2"><a class="viewcode-back" href="../_autosummary/BDD_test.html#BDD_test.show_swapping_2">[docs]</a><span class="k">def</span> <span class="nf">show_swapping_2</span><span class="p">():</span>
    <span class="n">mybdd</span> <span class="o">=</span> <span class="n">BDD</span><span class="o">.</span><span class="n">BDD</span><span class="o">.</span><span class="n">random</span><span class="p">(</span><span class="n">N</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span><span class="n">p</span><span class="o">=</span><span class="mf">0.8</span><span class="p">)</span>
    <span class="n">mybdd</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

    <span class="n">bdds</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">mybdd</span><span class="p">)</span>
    <span class="n">bdds</span><span class="o">.</span><span class="n">swap_up</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
    <span class="n">bdds</span><span class="o">.</span><span class="n">dump_gv</span><span class="p">()</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s2">&quot;./tmp/after_swap.dot&quot;</span><span class="p">,</span><span class="n">view</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">cleanup</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>


    <span class="n">mybdd</span> <span class="o">=</span> <span class="n">BDD</span><span class="o">.</span><span class="n">BDD</span><span class="o">.</span><span class="n">random</span><span class="p">(</span><span class="n">N</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span><span class="n">p</span><span class="o">=</span><span class="mf">0.8</span><span class="p">)</span>
    <span class="n">mybdd</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

    <span class="n">bdds</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">mybdd</span><span class="p">)</span>
    <span class="n">bdds</span><span class="o">.</span><span class="n">swap_up</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
    <span class="n">bdds</span><span class="o">.</span><span class="n">dump_gv</span><span class="p">()</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s2">&quot;./tmp/after_swap.dot&quot;</span><span class="p">,</span> <span class="n">view</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">cleanup</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></div>
</pre></div>

           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2019--2022, Alexey Bochkarev, Clemson University.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>