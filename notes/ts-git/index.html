<!DOCTYPE html>
<html><head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="/css/style.css">
    <link rel="preload" href="/icons.svg" as="image">
    <meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://www.bochkarev.io/images/git_conflict.png"/>

<meta name="twitter:title" content="ðŸ”€ Version control with git."/>
<meta name="twitter:description" content="A quick intro note on git (with a simple example)."/>

    
    
    <title>A.B. | ðŸ”€ Version control with git.</title>
</head>
<body>
        <div class="container"><div id="nav-panel" class="row">
    <hr class="topline"/>
        <input type="checkbox" id="checkbox">
        <label for="checkbox" class="menu-toggle">
            <svg viewBox="0 0 25 25"><use xlink:href="/icons.svg#hamburger"></use></svg>
        </label>
        <label for="checkbox" class="menu-toggle-text">
            A.B. &mdash; Site menu
        </label>
        <nav>
            <ul id="nav-menu">
                
                <li class="menu-item"><a class="nav-link" href="/">
                    
                    Me
                </a></li>
                
                <li class="menu-item"><a class="nav-link" href="/research/">
                    
                    Research
                </a></li>
                
                <li class="menu-item"><a class="nav-link" href="/teaching/">
                    
                    Teaching
                </a></li>
                
                <li class="menu-item"><a class="nav-link" href="/notes/">
                    
                    Misc notes
                </a></li>
                
                <li class="menu-item"><a class="nav-link" href="/contact/">
                    
                    Contact
                </a></li>
                
                <li class="menu-item"> ~ </li>
            <li class="menu-item">
            <a class="nav-link nav-icon-link" href="/bochkarev_cv.pdf">
                <svg viewBox="0 0 25 25"><use xlink:href="/icons.svg#i-CV"></use></svg>
            </a>
            
            <a class="nav-link nav-icon-link" href="mailto:web@bochkarev.io">
                <svg viewBox="0 0 25 25"><use xlink:href="/icons.svg#i-envelope"></use></svg>
            </a>
            
            <a class="nav-link nav-icon-link" href="/abochkarev-pubkey.asc">
                <svg viewBox="0 0 25 25"><use xlink:href="/icons.svg#i-key"></use></svg>
            </a>
            
            <a class="nav-link nav-icon-link" href="https://twitter.com/a_bochka">
                <svg viewBox="0 0 25 25"><use xlink:href="/icons.svg#i-twitter"></use></svg>
            </a>
            
            <a class="nav-link nav-icon-link" href="https://github.com/alex-bochkarev">
                <svg viewBox="0 0 25 25"><use xlink:href="/icons.svg#i-gh"></use></svg>
            </a>
            </li></ul>
        </nav>
</div>
<br/>

                
                    <div id="table-of-contents">
                        <h2> Index, <a href="#" class="nav-link">top</a> </h2> 
                        <div id="text-table-of-contents" class="not-a-text-link">
                            <nav id="TableOfContents">
  <ul>
    <li><a href="#introduction">Introduction</a>
      <ul>
        <li><a href="#some-context">Some context</a></li>
        <li><a href="#tools-for-today">Tools for today</a></li>
        <li><a href="#on-git-vs-dot-github">On Git vs. Github</a></li>
        <li><a href="#the-big-picture">The big picture</a></li>
      </ul>
    </li>
    <li><a href="#key-concepts-with-a-running-example">Key concepts with a running example</a>
      <ul>
        <li><a href="#basics-tracking-changes">Basics: tracking changes</a></li>
        <li><a href="#branching">Branching</a></li>
        <li><a href="#dealing-with-a-remote-repo">Dealing with a remote repo</a></li>
      </ul>
    </li>
    <li><a href="#some-tips-tricks-and-notes">Some tips, tricks, and notes</a>
      <ul>
        <li><a href="#adding-changes">Adding changes</a></li>
        <li><a href="#tags">Tags</a></li>
        <li><a href="#exploring-the-past">Exploring the past</a></li>
        <li><a href="#ignoring-files">Ignoring files</a></li>
        <li><a href="#large-files">Large files</a></li>
        <li><a href="#jupyter-notebooks">Jupyter notebooks</a></li>
        <li><a href="#submodules">Submodules</a></li>
        <li><a href="#github-pages">Github Pages</a></li>
        <li><a href="#collaboration-and-github">Collaboration and Github</a></li>
      </ul>
    </li>
    <li><a href="#further-reading">Further reading</a></li>
  </ul>
</nav>
                        </div>
                    </div>
                
            
            <div id="content">


<div class="main-text">
    <h1>ðŸ”€ Version control with git.</h1>
    <span class="metadata">
    

    
        <div class="nav-icon-link">
            <svg viewBox="0 0 25 25"><use xlink:href="/icons.svg#i-date"></use></svg>
        </div>
        Last update: <time datetime="2021-01-30">2021-09-27</time>.
    

    
        Tags: 
        
            
            <a class="nav-link" href="https://www.bochkarev.io/tags/tech-seminar">#tech-seminar</a>
        
            
            <a class="nav-link" href="https://www.bochkarev.io/tags/talk">#talk</a>
        
    
    </span>
    <div class="note">
<p><strong>Summary</strong> <hr> This is a note for someone far from software development, but
interested in tracking changes in source code and other text-based files. The
logic is built around a specific, trivial example.</p>
<ul>
<li><a href="https://en.wikipedia.org/wiki/Backup">backup</a>: is protecting against data loss. So, <em>when</em> your computer dies, you
are not too far behind. Any sort of <span class="underline">regular</span> backup procedure helps.</li>
<li><strong>(our focus)</strong> <a href="https://en.wikipedia.org/wiki/Version%5Fcontrol">version control</a>: is keeping track of changes in your files. So that you know
what did you do, when, why, and can get back if needed. There are several
tools, <a href="https://git-scm.com/">git</a> is <em>very</em> popular.</li>
<li>Think of it as a &ldquo;protocol&rdquo;, and a (local) app that runs it. <a href="https://github.com">GitHub</a> is
the most popular website offering hosting of git repositories.
(There are alternatives.)</li>
<li>Git is &ldquo;distributed&rdquo;: you work in a local copy. So, it is fast, and can work
offline<sup id="fnref:1"><a href="#fn:1" class="footnote-ref" role="doc-noteref">1</a></sup>.</li>
<li>It is especially good to track any sort of plain-text files (source code,
latex documents, markdown, etc.).</li>
<li>It allows (and encourages) <em>branching</em>, when you keep several &ldquo;lineages&rdquo; of your
code to test your ideas, while keeping a &ldquo;clean&rdquo; version easily available.</li>
<li>This note contains a brief overview and discusses a simple example of
<em>individual</em> (not collaborative) use.</li>
<li>There are <strong>many</strong> resources online. E.g. <a href="https://git-scm.com/book/en/v2/Getting-Started-First-Time-Git-Setup">&ldquo;ProGit&rdquo;</a> is a good book.</li>
<li>Working from a command line helps a lot to understand what&rsquo;s going on, but:</li>
<li>There are many excellent tools that help productivity &ndash;
<ul>
<li>stand-alone clients (<a href="https://desktop.github.com/">Github Desktop</a>, <a href="https://www.gitkraken.com/">GitKraken</a>, etc.);</li>
<li>some very good editor integrations &ndash; in <a href="https://code.visualstudio.com/">VSCode</a>, <a href="https://atom.io/">Atom</a>, <a href="https://www.sublimetext.com">Sublime</a>, Emacs (see
<a href="https://magit.vc/">Magit</a>), or almost any other serious editor or IDE.</li>
</ul>
</li>
</ul>
<p>Corrections, suggestions, and comments are very <a href="mailto:tech%5Fseminar@bochkarev.io">welcome</a>.</p>
</div>
<h2 id="introduction">Introduction</h2>
<h3 id="some-context">Some context</h3>
<p>There are two adjacent problems: backups and version control.</p>
<ul>
<li><a href="https://en.wikipedia.org/wiki/Backup">Backup</a> basically means making &ldquo;snapshots&rdquo; for further recovery. I think the
key is to have regular <strong>procedure</strong>, which any suitable tools: built-in software
(e.g., &ldquo;time machine&rdquo; for Apple), <a href="https://borgbackup.readthedocs.io/en/stable/">borgbackup</a>, or just <code>rsync</code>, etc.</li>
<li><a href="https://en.wikipedia.org/wiki/Version%5Fcontrol">version control systems</a> are used to keep track of changes in your files.
<a href="https://en.wikipedia.org/wiki/Git">Git</a> is one of the most popular ones. Alternatives include <a href="https://en.wikipedia.org/wiki/Apache%5FSubversion">subversion (SVN)</a>,
<a href="https://en.wikipedia.org/wiki/Mercurial">mercurial</a>, and <a href="https://en.wikipedia.org/wiki/Comparison%5Fof%5Fversion-control%5Fsoftware">more</a>. Further we will focus on version control and,
specifically, git.</li>
</ul>
<p>(<em>Collaboration</em> on code and other plain-text files is another topic, which
happens to be addressed particularly well by git &ndash; but this is out of the
scope of this note.)</p>
<h3 id="tools-for-today">Tools for today</h3>
<p><strong>1)</strong> You would need to have <strong>git</strong> installed. Check from the command line:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">git --version
</code></pre></div><p>which gave me:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text">git version 2.27.0
</code></pre></div><details> <summary> [ What if not? ]</summary>
<p>If it did not work, start <a href="https://git-scm.com/download">here</a>. It works out of the box on my GNU/Linux
machine, but if I were to use other systems, I would look into <a href="https://gitforwindows.org/">GitForWindows</a>
(see also a larger <a href="https://courses.cs.washington.edu/courses/cse154/20au/resources/assets/vscode-git-tutorial/windows/index.html">tutorial</a>), or hoped that MacOS will suggest me to install
it automatically (or, e.g., try to <code>brew install git</code>, if not &ndash; see <a href="https://brew.sh/">brew</a>
for more details).</p>
</details>
<p>As pointed out in the <a href="https://git-scm.com/book/en/v2/Getting-Started-First-Time-Git-Setup">docs</a>, you would need to set your name and email (to be
associated with your changes in the code).</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ git config --global user.name <span style="color:#e6db74">&#34;Your Name&#34;</span>
$ git config --global user.email YourName@example.com
$ git config --global init.defaultBranch main <span style="color:#75715e"># set the name of the default branch</span>
</code></pre></div><p><strong>2)</strong> We will need a text editor, of course. Any one will work. I am using
<a href="https://www.spacemacs.org/">(Space)Emacs</a> with <a href="https://magit.vc/">Magit</a> on a daily basis, but it was more convenient to make
a demo on <a href="https://code.visualstudio.com/">VSCode</a> (<a href="https://vscodium.com/">-ium</a>) with a standard extension called <em>GitGraph</em>. Good
editors have plugins that support git well and simplify many operations. For
discussion here, I will show commands as issued from the command line, but I find
editor integration more convenient to use for most tasks.</p>
<p><strong>3)</strong> It is convenient to see what is happening in our repo on <a href="https://pages.github.com/">GitHub</a>, so I
used an account there for the example below. I tend to use Github pretty
extensively to keep a copy of my code online<sup id="fnref:2"><a href="#fn:2" class="footnote-ref" role="doc-noteref">2</a></sup>.</p>
<h3 id="on-git-vs-dot-github">On Git vs. Github</h3>
<p>Git is a version control system &ndash; think a <em>&ldquo;protocol&rdquo;</em>. You work with a local
app (<code>git</code>) that tracks changes in your local folder. Many providers offer
<em>hosting</em> compatible with git. Examples include <a href="https://github.com/">GitHub</a>, <a href="https://about.gitlab.com/">GitLab</a>, <a href="https://bitbucket.org">BitBucket</a> and
others. Self-hosted options are available (e.g., see <a href="https://gitea.io/en-us/">gitea</a> or GitLab).</p>
<p>Usually, third-party providers implement &ldquo;social&rdquo; tools as well:
to facilitate collaborations, comments, issue tracking, etc. And also just allow
to demonstrate what kind of code you write. I think GitHub is <em>de facto</em>
standard at the moment.</p>
<h3 id="the-big-picture">The big picture</h3>
<p>A project lives in a repository (<em>&ldquo;repo&rdquo;</em>). In fact, it is just a folder with a
special <code>.git</code> subfolder, where the magic happens. There is something called
&ldquo;working area&rdquo;, &ldquo;staging area&rdquo;, and repositories:</p>
<figure><a href="/images/ts-git/workflow.svg#notalink"><img src="/images/ts-git/workflow.svg#notalink"/></a>
</figure>

<h2 id="key-concepts-with-a-running-example">Key concepts with a running example</h2>
<h3 id="basics-tracking-changes">Basics: tracking changes</h3>
<p>Assume we would like to develop some code in Python (this will be our running
example). So, we create a folder and immediately initialize a repo:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">git init
</code></pre></div><p>Output:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text">Initialized empty Git repository in /home/bochkarev/sandbox/demo-repo/.git/
</code></pre></div><p>It has created a special directory, <code>.git</code>, that will contain
the information concerning the history. Now, let us add some code and
save it as <code>new_doc.py</code>:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">print(<span style="color:#e6db74">&#34;Hello world&#34;</span>)

<span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">5</span>):
	print(<span style="color:#e6db74">&#34;i=&#34;</span> <span style="color:#f92672">+</span> str(i))
</code></pre></div><p>Assume we have implemented some basic functionality, and would like to save a
snapshot of this state in the repo. Note that git &ldquo;knows&rdquo; that we have some
changes now:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">git status
</code></pre></div><p>Output:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text">On branch master

No commits yet

Untracked files:
  (use &#34;git add &lt;file&gt;...&#34; to include in what will be committed)
	new_doc.py

nothing added to commit but untracked files present (use &#34;git add&#34; to track)
</code></pre></div><p>So, as git suggests, we first add the changes to the &ldquo;staging area&rdquo;:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">git add .
</code></pre></div><p>Here the period <code>.</code> means &ldquo;all files in the current directory&rdquo; (we could have
used a specific filename instead). Now <code>git status</code> shows that we have &ldquo;changes
to be committed&rdquo; (saved to the versions history):</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">git status
</code></pre></div><p>Output:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text">On branch master

No commits yet

Changes to be committed:
  (use &#34;git rm --cached &lt;file&gt;...&#34; to unstage)
	new file:   new_doc.py
</code></pre></div><p>We actually create a record in the versions history with:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">git commit -m<span style="color:#e6db74">&#34;first commit&#34;</span>
</code></pre></div><p>Output:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text">[master (root-commit) de41445] first commit
 1 file changed, 4 insertions(+)
 create mode 100644 new_doc.py
</code></pre></div><p>Let&rsquo;s say, we continue the development, and add more code, so that <code>new_doc.py</code> now reads:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">print(<span style="color:#e6db74">&#34;Hello world&#34;</span>)

<span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">5</span>):
	<span style="color:#66d9ef">for</span> j <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">5</span>):
		print(<span style="color:#e6db74">&#34;i=&#34;</span> <span style="color:#f92672">+</span> str(i)<span style="color:#f92672">+</span><span style="color:#e6db74">&#34;, j=&#34;</span> <span style="color:#f92672">+</span> str(j))
</code></pre></div><p>Note that git is aware of specific changes. We can highlight them by saying:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">git diff
</code></pre></div><p>Output:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text">diff --git a/new_doc.py b/new_doc.py
index fe46b97..105a3b3 100644
--- a/new_doc.py
+++ b/new_doc.py
@@ -1,4 +1,5 @@
 print(&#34;Hello world&#34;)

 for i in range(5):
-	print(&#34;i=&#34; + str(i))
+    for j in range(5):
+        print(&#34;i=&#34; + str(i)+&#34;, j=&#34; + str(j))
</code></pre></div><p>Indeed, we replaced the <code>print</code> line with a <code>print</code> in an inner loop: removed
lines are indicated with a minus sign in the beginning, added lines marked with
plus. Of course, it is not necessary to stare at cryptic symbols in the shell:
e.g., VSCode will highlight these changes nicely, if you switch to &ldquo;Version
Control&rdquo; tab and choose the changed file (<code>new_doc.py</code>):</p>
<p><img src="/images/ts-git/2021-02-05_13-11-46_screenshot.png#full-shadow" alt="Changes highlighted"></p>
<p>If we are happy with the changes, again, we add them to the &ldquo;staging&rdquo; area and
&ldquo;commit&rdquo; to the versions history with commands:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">git add .
git commit -m<span style="color:#e6db74">&#34;inner loop&#34;</span>
</code></pre></div><p>Output:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text">[master acd00af] inner loop
 1 file changed, 2 insertions(+), 1 deletion(-)
</code></pre></div><p>Now, to see the commits history, we can issue:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">git log
</code></pre></div><p>Output:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text">commit acd00afdf4c0c0a3fa6f5229752f1807d4398688
Author: Alexey Bochkarev &lt;a@bochkarev.io&gt;
Date:   Fri Feb 5 13:15:56 2021 +0100

    inner loop

commit de41445c3b150488871ef8526b519488eda5ed26
Author: Alexey Bochkarev &lt;a@bochkarev.io&gt;
Date:   Fri Feb 5 13:05:17 2021 +0100

    first commit
</code></pre></div><p>Or, if we have a lot of these and want a quick overview, we might want them
in a compact form:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">git log --pretty<span style="color:#f92672">=</span>oneline --abbrev-commit
</code></pre></div><p>Output:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text">acd00af inner loop
de41445 first commit
</code></pre></div><p>Now, getting back to the commit <code>first commit</code> is as simple as <code>git checkout de41445</code>. The repo will come back to the state at that moment, so we can look
around. For example, we could save something and get back with <code>git checkout master</code>. Usually what I might want, however, is to fetch a specific file from a
specific commit into the current moment. I could do this with <code>git show de41445:new_doc.py &gt; old_version.py</code>. (After this command I will have another
file, <code>old_version.py</code>, with the contents of <code>new_doc.py</code> as of the moment of
the first commit). I will not use this file, so I will just remove it for now,
with <code>rm ./old_version.py</code>.</p>
<p>Experimenting and working with code is more often done with something
called <em>branching</em>.</p>
<h3 id="branching">Branching</h3>
<p>So, one possible workflow is to have a &ldquo;clean&rdquo;, main branch (say, &ldquo;ready to
show to your supervisor&rdquo;), and experiment in separate versions, merging back
those that worked out.</p>
<p>Assume we want to try to switch to nice unicode variable names (greek
letters). First, we create a new <em>branch</em> for this feature:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">git checkout -b unicode_vars
</code></pre></div><p>Now, <code>git status</code> gives:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">git status
</code></pre></div><p>And the bottom left corner of my VSCodium editor also hints of the current
branch, like this:</p>
<p><img src="/images/ts-git/2021-02-05_16-38-40_screenshot.png#full-shadow" alt="Branch name indicator"></p>
<p>Our previous state of the tracked files (one file in this case) was left in a
<code>master</code> branch, and we jumped into a separate code &ldquo;spin-off&rdquo;. Let me
rename a variable, so <code>new_doc.py</code> now would look like:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">print(<span style="color:#e6db74">&#34;Hello world&#34;</span>)

<span style="color:#66d9ef">for</span> É‘ <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">5</span>):
    <span style="color:#66d9ef">for</span> j <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">5</span>):
        print(<span style="color:#e6db74">&#34;É‘=&#34;</span> <span style="color:#f92672">+</span> str(É‘)<span style="color:#f92672">+</span><span style="color:#e6db74">&#34;, j=&#34;</span> <span style="color:#f92672">+</span> str(j))

</code></pre></div><p>After we save the file, VSCode (or <code>git diff</code>) will highlight for us, what has
changed:</p>
<p><img src="/images/ts-git/2021-02-05_16-49-00_screenshot.png#full-shadow" alt="Changes highlighted"></p>
<p>Again, we commit this change:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">git add .
git commit -m<span style="color:#e6db74">&#34;renamed variables&#34;</span>
</code></pre></div><p>Output:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text">[unicode_vars 985d560] renamed variables
 1 file changed, 2 insertions(+), 2 deletions(-)
</code></pre></div><p>Assume we want to make some unrelated change now. (Suddenly! Or maybe because
we&rsquo;ve got an email about this) E.g., remember that there is a more compact
syntax for printing strings in Python. So we go back to the main branch to edit
the file:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">git checkout master
</code></pre></div><p>We are immediately back to the state we left when we made a spin-off, so we
change the file to become:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">print(<span style="color:#e6db74">&#34;Hello world&#34;</span>)

<span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">5</span>):
    <span style="color:#66d9ef">for</span> j <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">5</span>):
        print(<span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;i=</span><span style="color:#e6db74">{</span>i<span style="color:#e6db74">}</span><span style="color:#e6db74">, j=</span><span style="color:#e6db74">{</span>j<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>)

</code></pre></div><p>That&rsquo;s way more readable, so we &ldquo;save&rdquo; it into the master branch:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">git diff <span style="color:#75715e"># let&#39;s see the changes</span>
git add .
git commit -m<span style="color:#e6db74">&#34;improved code readability (printing strings)&#34;</span>
</code></pre></div><p>Output:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text">diff --git a/new_doc.py b/new_doc.py
index 105a3b3..f288fa7 100644
--- a/new_doc.py
+++ b/new_doc.py
@@ -2,4 +2,5 @@ print(&#34;Hello world&#34;)

 for i in range(5):
     for j in range(5):
-        print(&#34;i=&#34; + str(i)+&#34;, j=&#34; + str(j))
+        print(f&#34;i={i}, j={j}&#34;)
+
[master a6c0cc2] improved code readability (printing strings)
 1 file changed, 2 insertions(+), 1 deletion(-)
</code></pre></div><p>Okay, now we go back to work on our feature with <code>git checkout unicode_vars</code>.
Assume we test the feature with <code>python ./new_doc.py</code>, make sure it works, so we
want to integrate it back into the &ldquo;main&rdquo; branch of our code. To do this, we go
back to the <code>master</code> branch and try to merge it with the feature branch
(<code>unicode_vars</code>):</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">git checkout master
git merge unicode_vars
</code></pre></div><p>Output:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text">Auto-merging new_doc.py
CONFLICT (content): Merge conflict in new_doc.py
Automatic merge failed; fix conflicts and then commit the result.
</code></pre></div><p>We have created a <em>conflict</em>: edited the same line in both branches, and there
is no way to resolve it automatically. This is a normal situation, and the
source file now looks as follows:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">print(<span style="color:#e6db74">&#34;Hello world&#34;</span>)

<span style="display:block;width:100%;background-color:#3c3d38"><span style="color:#66d9ef">for</span> É‘ <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">5</span>):
</span>    <span style="color:#66d9ef">for</span> j <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">5</span>):
<span style="color:#f92672">&lt;&lt;&lt;&lt;&lt;&lt;&lt;</span> HEAD
        print(<span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;i=</span><span style="color:#e6db74">{</span>i<span style="color:#e6db74">}</span><span style="color:#e6db74">, j=</span><span style="color:#e6db74">{</span>j<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>)

<span style="color:#f92672">=======</span>
        print(<span style="color:#e6db74">&#34;É‘=&#34;</span> <span style="color:#f92672">+</span> str(É‘)<span style="color:#f92672">+</span><span style="color:#e6db74">&#34;, j=&#34;</span> <span style="color:#f92672">+</span> str(j))
<span style="color:#f92672">&gt;&gt;&gt;&gt;&gt;&gt;&gt;</span> unicode_vars</code></pre></div>
<p>This is pretty self-explanatory, but notice what has just happened. A change in
the highlighted line was straightforward to make, so git did it for us
automatically. Since <code>print</code> instruction was edited in both branches, we&rsquo;d
need to edit it manually (with any editor) to our taste. Note that VSCodium
allows convenience of &ldquo;Accept Change&rdquo;-like buttons (which we wouldn&rsquo;t use in
this case, though):</p>
<p><img src="/images/ts-git/2021-02-05_17-10-50_screenshot.png#full-shadow" alt="Changes highlighted"></p>
<p>After the edits, the resulting file is:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">print(<span style="color:#e6db74">&#34;Hello world&#34;</span>)

<span style="color:#66d9ef">for</span> É‘ <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">5</span>):
    <span style="color:#66d9ef">for</span> j <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">5</span>):
        print(<span style="color:#e6db74">&#34;É‘=</span><span style="color:#e6db74">{É‘}</span><span style="color:#e6db74">, j=</span><span style="color:#e6db74">{j}</span><span style="color:#e6db74">&#34;</span>)

</code></pre></div><p>Following the instructions, we add and commit the changes initiated by <code>merge</code>
as usual:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">git add .
git commit -m<span style="color:#e6db74">&#34;merged &#39;unicode variables&#39; feature&#34;</span>
</code></pre></div><p>Output:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text">[master 1c7dd06] merged &#39;unicode variables&#39; feature
</code></pre></div><p>So, again, what we have just done: we created a spin-off branch, tried to
implement a feature, introduced some changes into the &ldquo;main&rdquo; code along the way,
and merged everything back successfully. Many tools, including VSCode, can show
nice figures to illustrate what is going on:</p>
<p><img src="/images/ts-git/2021-02-05_17-21-45_screenshot.png#full-shadow" alt="Changes highlighted"></p>
<p>Each point here is a commit (a &ldquo;snapshot&rdquo; of the state for tracked files). We
created a separate branch, then our branches diverged due to the two conflicting
commits, and then we merged everything back at the very top commit, <code>1c7dd06a</code>.</p>
<p>An alternative solution would be to try to <em>&ldquo;replay&rdquo;</em> the changes from
<code>unicode_vars</code> branch on top of the changes in <code>master</code>, as if it were based
on <em>already updated <code>master</code></em> &ndash; see git <a href="https://git-scm.com/book/en/v2/Git-Branching-Rebasing">rebase</a> for details.</p>
<p>You can check what branches are there with:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">git branch
</code></pre></div><p>Output:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text">* master
  unicode_vars
</code></pre></div><p>To show just branches not merged into the main branch: <code>git branch --no-merged master</code>. Branches that are no longer needed can be deleted with
<code>git branch -d &lt;branch-name&gt;</code>.</p>
<p>There are some materials on branching strategies and git workflows (e.g., on
<a href="https://nvie.com/posts/a-successful-git-branching-model/">&ldquo;git-flow&rdquo;</a> and <a href="https://guides.github.com/introduction/flow/">GitHub flow</a>, with the latter being focused on simple
collaboration) &ndash; but this discussion looked somewhat too complicated for my
own needs at the moment.</p>
<h3 id="dealing-with-a-remote-repo">Dealing with a remote repo</h3>
<p>Even if you work alone on your code, you might still want to use a concept of
remote repos. For example, if you are running separate experiments on the
cluster and would like to (1) keep them under version control, and (2) run
them in parallel. But let us consider another (perhaps, more general) common
use case, when you would like to sync your local repo with a remote version
on Github &ndash; e.g., to keep things backed up online, or to share code.</p>
<p>Creating a remote GitHub repo is simple. Assume we have a <em>local</em> repository
first (the one we discussed above would work). We go ahead and <a href="https://docs.github.com/en/github/getting-started-with-github/create-a-repo">create a
Github repo</a> (not initializing it with anything). Essentially, Github will
give you both the address and commands to use to connect your local repo with
its remote counterpart. Afterwards, a <em>remote</em> will act mostly as another
<em>branch(es)</em>. You could <code>pull</code> changes to your local repo from the remote,
<code>push</code> your local changes back to the remote, and so on. For example:</p>
<ul>
<li><code>git remote add origin &lt;Github-address&gt;</code> will make git aware of the specific
remote repo, and will call this remote repo <code>origin</code>.</li>
<li>alternatively, for an existing <em>remote</em> repo, which you would like to have in
your local folder, you issue <code>git clone &lt;repo-address&gt;</code>.</li>
<li><code>git push -u origin master</code> will push your local changes from <code>master</code> branch
to <code>origin</code> (on a Github server).</li>
<li><code>git pull</code> will try to pull changes from the remote (assigned by the previous
<code>push -u</code> command) and <code>merge</code> it into the current branch.<sup id="fnref:3"><a href="#fn:3" class="footnote-ref" role="doc-noteref">3</a></sup></li>
</ul>
<p>A repository on the Github can be marked as &ldquo;public&rdquo;, so that anyone would be
able to see the code (see <a href="https://docs.github.com/en/github/creating-cloning-and-archiving-repositories/about-repository-visibility">a note on visibility</a>). For example,
source code for this website is available at
<a href="https://github.com/alex-bochkarev/bochkarev.io">https://github.com/alex-bochkarev/bochkarev.io</a>. You can create <code>README</code> file,
so it will be shown by default when someone opens your repository (and it is a
good practice to create one, describing what is this repo about, how to
contribute, etc. &ndash; at least very briefly. See <a href="https://docs.github.com/en/github/creating-cloning-and-archiving-repositories/about-readmes">About READMEs</a>). Perhaps, the
most widespread format is <code>.md</code> in <a href="https://guides.github.com/features/mastering-markdown/">(Github&rsquo;s) Markdown</a>, but there is <a href="https://github.com/github/markup/blob/master/README.md#markups">more</a>.</p>
<h2 id="some-tips-tricks-and-notes">Some tips, tricks, and notes</h2>
<h3 id="adding-changes">Adding changes</h3>
<p>Interestingly, you can not only add <em>changed files</em> to a commit, but pick
specific changes <em>within</em> a file &ndash; if you happened to make two logically
different edits and would like to keep them in different commits. For
example, in VSCode you can pick (&ldquo;stage&rdquo;) specific changes in the main editor
window by pressing this &ldquo;plus&rdquo; sign:</p>
<p><img src="/images/ts-git/indiv_changes.png#full-shadow" alt="Changes highlighted"></p>
<p>If you happened to <code>git add</code> something wrong, you can always <code>git reset</code>. It
will not <strong>not</strong> alter any files, but remove everything from the
&ldquo;stage area&rdquo;, so you can start staging again.</p>
<h3 id="tags">Tags</h3>
<p>Sometimes I want to mark certain commit with a meaningful comment &ndash; to be
able to get back to this version quickly, if needed. See git <a href="https://git-scm.com/book/en/v2/Git-Basics-Tagging">tags</a>: <code>git tag -m&quot;Submitted to the journal&quot; v1.0</code> followed by <code>git push --tags</code> will create a
tag <code>v1.0</code> with a comment <code>Submitted to the journal</code> and push it to a remote.
Now, you can, e.g.:</p>
<ul>
<li>quickly get back to this version with <code>git checkout v1.0</code>.</li>
<li>click &ldquo;Tags&rdquo; button on Github, choose <code>v1.0</code> and download a <code>.zip</code> file with
this version.</li>
</ul>
<h3 id="exploring-the-past">Exploring the past</h3>
<p>Sometimes it is handy to browse through past versions of the code. Apart from
the <code>git log</code> and <code>git checkout</code> mentioned above, the Github interface might
help. Note that you can click on any commit there and browse the repo (in a
web browser) as it was back then.</p>
<p>An overview for changes in a specific file with contributors can be called
with &ldquo;History&rdquo; or &ldquo;Blame&rdquo; buttons (see also <a href="https://git-scm.com/docs/git-blame">git-blame</a> docs). Note that Github
web interface shows <code>master</code> / <code>main</code> branch by default, but you can choose
any branch/tag/commit to explore. It helps sometimes to answer questions like
&ldquo;where have this figure come from? Which version of my code?..&rdquo;.</p>
<p>Sometimes it is also handy to have the current commit and branch (automatically
&ndash; e.g., to include into a log file). The following commands might help:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">git rev-parse --abbrev-ref HEAD <span style="color:#75715e"># current branch</span>
git rev-parse HEAD <span style="color:#75715e"># current commit</span>
</code></pre></div><p>Output:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text">master
1c7dd06adb46c63e2706babd2500c040e934d80e
</code></pre></div><h3 id="ignoring-files">Ignoring files</h3>
<p>Sometimes you want to issue a simple <code>git add .</code> command, but do not want
some files to be tracked at all. Maybe some backup files, the ones related to
personal configurations that have nothing to do with the &ldquo;public&rdquo; repo, large
problem instances, intermediary results, auxiliary things (<code>__pycache__</code> for
python projects, etc.). To do this, just add a special <code>.gitignore</code> file with
file names (can include wildcards). See also <a href="https://git-scm.com/book/en/v2/Git-Basics-Recording-Changes-to-the-Repository#%5Fignoring">ProGit</a>, <a href="https://docs.github.com/en/github/using-git/ignoring-files">GitHub docs</a>, and
some <a href="https://github.com/github/gitignore">examples</a>.</p>
<h3 id="large-files">Large files</h3>
<p>As a special case, there is a problem of large files. GitHub imposes a <a href="https://docs.github.com/en/github/managing-large-files/what-is-my-disk-quota">strict
limit</a> on file sizes of 100 Mb per file (as of writing this). I do not know a
good solution to this problem, but:</p>
<ol>
<li><strong>The key point:</strong> It is questionable if 100 Mb+ files and/or binary files
really <em>need</em> text-based version control. See <code>.gitignore</code> above.</li>
<li>There is something called <a href="https://git-lfs.github.com/">git LFS</a> (Large file storage.) I tried to use it
once: seemed convenient, but I had a feeling that I am out of control
regarding my current quotas, etc. So I decided for myself to avoid it
whenever possible.</li>
<li>See also <a href="https://docs.github.com/en/github/managing-large-files/working-with-large-files">GitHub docs</a> on large files.</li>
<li>It seems like there is an attempt to solve this problem specifically for
ML projects called <a href="https://dvc.org/">Data Version Control (DVC)</a>. See also Dolt and their
<a href="https://www.dolthub.com/blog/2020-03-06-so-you-want-git-for-data/">blogpost on &ldquo;GitHub for data&rdquo;</a>. These caught my eye, but I have no
first-hand experience.</li>
<li>Please, <a href="/contact/">let</a> me know if you are aware of any good solution, especially
relevant to OR / DataScience.</li>
</ol>
<h3 id="jupyter-notebooks">Jupyter notebooks</h3>
<p>I do not use <code>.ipynb</code> actively at the moment, so I can&rsquo;t give any good
recommendations. First, I do not know any good solution to version-control
<a href="https://jupyter.org/">Jupyter</a> notebooks. Git is still useful, since <code>.ipynb</code> are basically text files,
just does not allow to see differences conveniently. (<a href="https://blog.reviewnb.com/jupyter-version-control/">A note</a> on this.)</p>
<p>Note that Github is not always best even with <em>showing</em> (rendering) the
notebooks. It might help to use a separate solution to link your notebooks
hosted on Gihtub &ndash; e.g., see <a href="https://nbviewer.jupyter.org/">https://nbviewer.jupyter.org/</a>. Google Colab also
<a href="https://colab.research.google.com/github/googlecolab/colabtools/blob/master/notebooks/colab-github-demo.ipynb">offers</a> loading public notebooks from Github (as I write this). If you
specifically need <em>executing</em> notebooks online, you might be better off looking
into <a href="https://colab.research.google.com/github/googlecolab/colabtools/blob/master/notebooks/colab-github-demo.ipynb">Google Colab</a> or <a href="https://mybinder.org/">binder</a>.</p>
<h3 id="submodules">Submodules</h3>
<p>If you ever find yourself in need of a &ldquo;repo-in-a-repo&rdquo; (e.g., when you use a
library that you&rsquo;d like to version-control separately) &ndash; see <a href="https://git-scm.com/book/en/v2/Git-Tools-Submodules">submodules</a>.</p>
<h3 id="github-pages">Github Pages</h3>
<p>Github offers a simple website hosting integrated with git &ndash; for projects
and/or personal webpages. See <a href="https://pages.github.com/">GithubPages</a> for up to date details.</p>
<h3 id="collaboration-and-github">Collaboration and Github</h3>
<p>This is basically outside of this note&rsquo;s scope, but of course, possible
collaborations and social interactions are strong points of Github.</p>
<ul>
<li>You can <a href="https://docs.github.com/en/github/getting-started-with-github/fork-a-repo">&ldquo;fork&rdquo;</a> a repository easily (to work locally and, perhaps, propose
contributions back); a simple <a href="https://guides.github.com/activities/hello-world/">Hello World</a> tutorial might help.</li>
<li>There is an <a href="https://guides.github.com/features/issues/">issue-tracking</a> mechanism and per-project <a href="https://docs.github.com/en/github/building-a-strong-community/about-wikis">Wiki</a>.</li>
<li>and so on. Again, there is a large, separate topic.</li>
</ul>
<h2 id="further-reading">Further reading</h2>
<ul>
<li><a href="https://git-scm.com/book/en/v2/Git-Basics-Tagging">ProGit</a> book.</li>
<li><a href="https://guides.github.com/introduction/flow/">Github Guides</a>.</li>
<li>Many other resources to choose from. Some random examples:
<ul>
<li>some interactive tutorials: <a href="https://try.github.io/">https://try.github.io/</a></li>
<li>A <a href="https://marklodato.github.io/visual-git-guide/index-en.html?no-svg">visual</a> git reference.</li>
<li>A git <a href="https://danielmiessler.com/study/git/">primer</a>.</li>
<li><a href="https://www.reddit.com/r/git/">r/git</a> community on Reddit (see the &ldquo;sidebar&rdquo;!)</li>
</ul>
</li>
</ul>
<!--listend-->
<ul>
<li>An extensive built-in help. E.g., see <code>git help everyday</code>, <code>git help gittutorial</code>, <code>git help git</code>, and others.</li>
</ul>
<section class="footnotes" role="doc-endnotes">
<hr>
<ol>
<li id="fn:1" role="doc-endnote">
<p>Note that you do not need a Github account to work with git. I have several repos completely offline &ndash; just to track versions locally. You do not loose anything this way, except collaboration features and an off-site backup.&#160;<a href="#fnref:1" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
<li id="fn:2" role="doc-endnote">
<p>Note that you can make a repo &ldquo;private&rdquo;, so no one by default will have access, besides you. (see the <a href="https://docs.github.com/en/github/creating-cloning-and-archiving-repositories/about-repository-visibility">docs</a>)&#160;<a href="#fnref:2" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
<li id="fn:3" role="doc-endnote">
<p>Note that you can edit files directly on Github, via a web interface. It will just create commits on the respective branch of the <em>remote</em> repo.&#160;<a href="#fnref:3" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
</ol>
</section>

</div>
<br/>

            </div>
        </div>
        <footer class="footer"><br>
<div class="site-footer">
    <p class="footer-text nav-link">Â© 2018&mdash;2021 <b><a class="nav-link" href="/">Alexey A. Bochkarev</a></b> All rights reserved
        â¬© <a class="nav-link" href="/privacy">Privacy Policy</a>
        â¬© <a class="nav-link" href="/disclaimer">Disclaimer</a>
        | Made with a <a href="https://github.com/alex-bochkarev/hugo-desk-theme">custom theme</a> for <a href="https://gohugo.io/">Hugo</a>.
    </p> <br>
</div>
</footer>
    </body>
</html>
